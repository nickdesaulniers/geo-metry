function Sierpinski(){function t(t,e,r){var n=Math.min(t.length,e.length),a=new Array(n);if(r>1||0>r)throw new Error("bad percent");for(var o=0;n>o;++o)a[o]=t[o]*(1-r)+e[o]*r;return a}function e(r,n,a,o,i){if(0===i)return r.concat(a,n).concat(r.concat(a,o),r.concat(n,o),n.concat(a,o));var c=t(r,n,.5),u=t(r,a,.5),s=t(r,o,.5),l=t(n,a,.5),h=t(n,o,.5),f=t(a,o,.5);return--i,e(r,c,u,s,i).concat(e(c,n,l,h,i),e(u,l,a,f,i),e(s,h,f,o,i))}function r(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function n(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function a(t){var e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];return[t[0]/e,t[1]/e,t[2]/e]}var o=[[0,0,-1],[0,.9428,.3333],[-.8165,-.4714,.3333],[.8165,-.4714,.3333]];const i=3;for(var c=e(o[0],o[1],o[2],o[3],i),u=new Array(c.length),s=0;s<u.length/3;++s)u[s]=s;for(var l=[],s=0;s<c.length;s+=9){var h=[c[s],c[s+1],c[s+2]],f=[c[s+3],c[s+4],c[s+5]],v=[c[s+6],c[s+7],c[s+8]],d=a(n(r(h,f),r(h,v)));l=l.concat(d,d,d)}return{vertices:c,indices:u,normals:l}}var WebGLShaderLoader=function(){function t(t){this.errors=[],this.vertexShader=this.fragmentShader=null,this.gl=e(t),this.gl||this.errors.push("webgl unsupported")}function e(t){return t instanceof HTMLCanvasElement?t.getContext("webgl")||t.getContext("experimental-webgl"):t}function r(t,e){function r(){++c===a&&e(i,o)}function n(t){i.push("Failed to load "+t.target.src),r()}for(var a=t.length,o=[],i=[],c=0,u=0;a>u;++u)o[u]=new Image,o[u].onload=r,o[u].onerror=n,o[u].src=t[u]}function n(t,e){var r="getActive"+e,n="get"+e+"Location";return function(e,a){for(var o=e.getProgramParameter(a,t),i={},c=null,u=0;o>u;++u)c=e[r](a,u).name,i[c]=e[n](a,c);return i}}var a=WebGLRenderingContext.prototype.VERTEX_SHADER,o=WebGLRenderingContext.prototype.FRAGMENT_SHADER;t.prototype={loadFromStr:function(t,e,r){"string"!=typeof t||"string"!=typeof e||"function"!=typeof r?(this.errors.push("Usage: loaderInstance.loadFromStr('', '', function (errors, program));"),r(this.errors,null,this.gl)):0===t.length||0===e.length?(this.errors.push("empty shader string"),r(this.errors,null,this.gl)):(this.vertexShader=this.compile(a,t),this.fragmentShader=this.compile(o,e),r(this.errors,this.link(),this.gl))},loadFromXHR:function(t,e,r){if("string"!=typeof t||"string"!=typeof e||"function"!=typeof r)return this.errors.push("Usage: loaderInstance.loadFromXHR('', '', function (errors, program));"),void r(this.errors,null,this.gl);if(0===t.length||0===e.length)return this.errors.push("empty shader path"),void r(this.errors,null,this.gl);var n=0,i=function(t,e){return function(a,o){return a?(this[t]=this.compile(e,o),void(++n>1&&r(this.errors,this.link(),this.gl))):(this.errors.push("xhr non 200 response code"),void r(this.errors,null,this.gl))}.bind(this)}.bind(this);this.fetch(t,i("vertexShader",a)),this.fetch(e,i("fragmentShader",o))},compile:function(t,e){var r=this.gl.createShader(t);return this.gl.shaderSource(r,e),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)||this.errors.push(this.gl.getShaderInfoLog(r)),r},link:function(){var t=this.gl.createProgram();return this.gl.attachShader(t,this.vertexShader),this.gl.attachShader(t,this.fragmentShader),this.gl.linkProgram(t),this.gl.getProgramParameter(t,this.gl.LINK_STATUS)||this.errors.push(this.gl.getProgramInfoLog(t)),t},fetch:function(t,e){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){e(200===r.status,r.response)},r.send()}};var i=WebGLRenderingContext.prototype,c=n(i.ACTIVE_ATTRIBUTES,"Attrib"),u=n(i.ACTIVE_UNIFORMS,"Uniform");return t.prototype.getAttributes=c,t.prototype.getUniforms=u,t.load=function(n,a,o,i){o=o||[];var s=0,l=!1,h=!o.length,f=a.length,v=[],d=[],m=[],g=e(n);g||v.push("webgl unsupported"),h||r(o,function(t,e){t.length&&v.concat(t),m=e,h=!0,l&&i(v,g,d,m)}),a.forEach(function(e,r){if(r%2!==1){var n=new t(g);n.loadFromXHR(a[r],a[r+1],function(t,e){t.length&&v.concat(t),d[r/2]={attributes:c(g,e),program:e,uniforms:u(g,e)},++s===f/2&&(l=!0,h&&i(v,g,d,m))})}})},t}();if(function(t,e,r,n){"use strict";function a(t,e){for(var r=0,n=t.length;n>r;r++)f(t[r],e)}function o(t){for(var e,r=0,n=t.length;n>r;r++)e=t[r],h(e,w[c(e)])}function i(t){return function(e){O.call(V,e)&&(f(e,t),a(e.querySelectorAll(L),t))}}function c(t){var e=t.getAttribute("is");return _.call(T,e?e.toUpperCase():t.nodeName)}function u(t){var e=t.currentTarget,r=t.attrChange,n=t.prevValue,a=t.newValue;e.attributeChangedCallback&&"style"!==t.attrName&&e.attributeChangedCallback(t.attrName,r===t.ADDITION?null:n,r===t.REMOVAL?null:a)}function s(t){var e=i(t);return function(t){e(t.target)}}function l(t,e){var r=this;B.call(r,t,e),v.call(r,{target:r})}function h(t,e){Y(t,e),g?g.observe(t,X):(Z&&(t.setAttribute=l,t[p]=m(t),t.addEventListener(b,v)),t.addEventListener(A,u)),t.createdCallback&&(t.created=!0,t.createdCallback(),t.created=!1)}function f(t,e){var r,n=c(t),a="attached",o="detached";n>-1&&(q(t,w[n]),n=0,e!==a||t[a]?e!==o||t[o]||(t[a]=!1,t[o]=!0,n=1):(t[o]=!1,t[a]=!0,n=1),n&&(r=t[e+"Callback"])&&r.call(t))}if(!(n in e)){var v,d,m,g,p="__"+n+(1e5*Math.random()>>0),M="extends",A="DOMAttrModified",b="DOMSubtreeModified",E=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,y=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],T=[],w=[],L="",R=e.documentElement,_=T.indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},P=r.prototype,N=P.hasOwnProperty,O=P.isPrototypeOf,S=r.defineProperty,C=r.getOwnPropertyDescriptor,F=r.getOwnPropertyNames,I=r.getPrototypeOf,x=r.setPrototypeOf,D=!!r.__proto__,G=r.create||function z(t){return t?(z.prototype=t,new z):this},Y=x||(D?function(t,e){return t.__proto__=e,t}:F&&C?function(){function t(t,e){for(var r,n=F(e),a=0,o=n.length;o>a;a++)r=n[a],N.call(t,r)||S(t,r,C(e,r))}return function(e,r){do t(e,r);while(r=I(r));return e}}():function(t,e){for(var r in e)t[r]=e[r];return t}),q=x||D?function(t,e){O.call(e,t)||h(t,e)}:function(t,e){t[p]||(t[p]=r(!0),h(t,e))},U=t.MutationObserver||t.WebKitMutationObserver,V=(t.HTMLElement||t.Element||t.Node).prototype,k=V.cloneNode,B=V.setAttribute,H=e.createElement,X=U&&{attributes:!0,characterData:!0,attributeOldValue:!0},W=U||function(){Z=!1,R.removeEventListener(A,W)},j=!1,Z=!0;U||(R.addEventListener(A,W),R.setAttribute(p,1),R.removeAttribute(p),Z&&(v=function(t){var e,r,n,a=this;if(a===t.target){e=a[p],a[p]=r=m(a);for(n in r){if(!(n in e))return d(0,a,n,e[n],r[n],"ADDITION");if(r[n]!==e[n])return d(1,a,n,e[n],r[n],"MODIFICATION")}for(n in e)if(!(n in r))return d(2,a,n,e[n],r[n],"REMOVAL")}},d=function(t,e,r,n,a,o){var i={attrChange:t,currentTarget:e,attrName:r,prevValue:n,newValue:a};i[o]=t,u(i)},m=function(t){for(var e,r,n={},a=t.attributes,o=0,i=a.length;i>o;o++)e=a[o],r=e.name,"setAttribute"!==r&&(n[r]=e.value);return n})),e[n]=function(t,r){if(n=t.toUpperCase(),j||(j=!0,U?(g=function(t,e){function r(t,e){for(var r=0,n=t.length;n>r;e(t[r++]));}return new U(function(n){for(var a,o,i=0,c=n.length;c>i;i++)a=n[i],"childList"===a.type?(r(a.addedNodes,t),r(a.removedNodes,e)):(o=a.target,o.attributeChangedCallback&&"style"!==a.attributeName&&o.attributeChangedCallback(a.attributeName,a.oldValue,o.getAttribute(a.attributeName)))})}(i("attached"),i("detached")),g.observe(e,{childList:!0,subtree:!0})):(e.addEventListener("DOMNodeInserted",s("attached")),e.addEventListener("DOMNodeRemoved",s("detached"))),e.addEventListener("readystatechange",function(){a(e.querySelectorAll(L),"attached")}),e.createElement=function(t,r){var n,a=H.apply(e,arguments);return r&&a.setAttribute("is",t=r.toLowerCase()),n=_.call(T,t.toUpperCase()),n>-1&&h(a,w[n]),a},V.cloneNode=function(t){var e=k.call(this,!!t),r=c(e);return r>-1&&h(e,w[r]),t&&o(e.querySelectorAll(L)),e}),-1<_.call(T,n))throw new Error("A "+t+" type is already registered");if(!E.test(n)||-1<_.call(y,n))throw new Error("The type "+t+" is invalid");var n,u=function(){return e.createElement(v,f&&n)},l=r||P,f=N.call(l,M),v=f?r[M]:n,d=T.push(n)-1;return L=L.concat(L.length?",":"",f?v+'[is="'+t.toLowerCase()+'"]':v),u.prototype=w[d]=N.call(l,"prototype")?l.prototype:G(V),a(e.querySelectorAll(L),"attached"),u}}}(window,document,Object,"registerElement"),!GLMAT_EPSILON)var GLMAT_EPSILON=1e-6;if(!GLMAT_ARRAY_TYPE)var GLMAT_ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;if(!GLMAT_RANDOM)var GLMAT_RANDOM=Math.random;var glMatrix={};glMatrix.setMatrixArrayType=function(t){GLMAT_ARRAY_TYPE=t},"undefined"!=typeof exports&&(exports.glMatrix=glMatrix);var degree=Math.PI/180;glMatrix.toRadian=function(t){return t*degree};var mat4={};mat4.create=function(){var t=new GLMAT_ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},mat4.clone=function(t){var e=new GLMAT_ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},mat4.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},mat4.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},mat4.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],a=e[3],o=e[6],i=e[7],c=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=c}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},mat4.invert=function(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],c=e[5],u=e[6],s=e[7],l=e[8],h=e[9],f=e[10],v=e[11],d=e[12],m=e[13],g=e[14],p=e[15],M=r*c-n*i,A=r*u-a*i,b=r*s-o*i,E=n*u-a*c,y=n*s-o*c,T=a*s-o*u,w=l*m-h*d,L=l*g-f*d,R=l*p-v*d,_=h*g-f*m,P=h*p-v*m,N=f*p-v*g,O=M*N-A*P+b*_+E*R-y*L+T*w;return O?(O=1/O,t[0]=(c*N-u*P+s*_)*O,t[1]=(a*P-n*N-o*_)*O,t[2]=(m*T-g*y+p*E)*O,t[3]=(f*y-h*T-v*E)*O,t[4]=(u*R-i*N-s*L)*O,t[5]=(r*N-a*R+o*L)*O,t[6]=(g*b-d*T-p*A)*O,t[7]=(l*T-f*b+v*A)*O,t[8]=(i*P-c*R+s*w)*O,t[9]=(n*R-r*P-o*w)*O,t[10]=(d*y-m*b+p*M)*O,t[11]=(h*b-l*y-v*M)*O,t[12]=(c*L-i*_-u*w)*O,t[13]=(r*_-n*L+a*w)*O,t[14]=(m*A-d*E-g*M)*O,t[15]=(l*E-h*A+f*M)*O,t):null},mat4.adjoint=function(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],c=e[5],u=e[6],s=e[7],l=e[8],h=e[9],f=e[10],v=e[11],d=e[12],m=e[13],g=e[14],p=e[15];return t[0]=c*(f*p-v*g)-h*(u*p-s*g)+m*(u*v-s*f),t[1]=-(n*(f*p-v*g)-h*(a*p-o*g)+m*(a*v-o*f)),t[2]=n*(u*p-s*g)-c*(a*p-o*g)+m*(a*s-o*u),t[3]=-(n*(u*v-s*f)-c*(a*v-o*f)+h*(a*s-o*u)),t[4]=-(i*(f*p-v*g)-l*(u*p-s*g)+d*(u*v-s*f)),t[5]=r*(f*p-v*g)-l*(a*p-o*g)+d*(a*v-o*f),t[6]=-(r*(u*p-s*g)-i*(a*p-o*g)+d*(a*s-o*u)),t[7]=r*(u*v-s*f)-i*(a*v-o*f)+l*(a*s-o*u),t[8]=i*(h*p-v*m)-l*(c*p-s*m)+d*(c*v-s*h),t[9]=-(r*(h*p-v*m)-l*(n*p-o*m)+d*(n*v-o*h)),t[10]=r*(c*p-s*m)-i*(n*p-o*m)+d*(n*s-o*c),t[11]=-(r*(c*v-s*h)-i*(n*v-o*h)+l*(n*s-o*c)),t[12]=-(i*(h*g-f*m)-l*(c*g-u*m)+d*(c*f-u*h)),t[13]=r*(h*g-f*m)-l*(n*g-a*m)+d*(n*f-a*h),t[14]=-(r*(c*g-u*m)-i*(n*g-a*m)+d*(n*u-a*c)),t[15]=r*(c*f-u*h)-i*(n*f-a*h)+l*(n*u-a*c),t},mat4.determinant=function(t){var e=t[0],r=t[1],n=t[2],a=t[3],o=t[4],i=t[5],c=t[6],u=t[7],s=t[8],l=t[9],h=t[10],f=t[11],v=t[12],d=t[13],m=t[14],g=t[15],p=e*i-r*o,M=e*c-n*o,A=e*u-a*o,b=r*c-n*i,E=r*u-a*i,y=n*u-a*c,T=s*d-l*v,w=s*m-h*v,L=s*g-f*v,R=l*m-h*d,_=l*g-f*d,P=h*g-f*m;return p*P-M*_+A*R+b*L-E*w+y*T},mat4.multiply=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],c=e[4],u=e[5],s=e[6],l=e[7],h=e[8],f=e[9],v=e[10],d=e[11],m=e[12],g=e[13],p=e[14],M=e[15],A=r[0],b=r[1],E=r[2],y=r[3];return t[0]=A*n+b*c+E*h+y*m,t[1]=A*a+b*u+E*f+y*g,t[2]=A*o+b*s+E*v+y*p,t[3]=A*i+b*l+E*d+y*M,A=r[4],b=r[5],E=r[6],y=r[7],t[4]=A*n+b*c+E*h+y*m,t[5]=A*a+b*u+E*f+y*g,t[6]=A*o+b*s+E*v+y*p,t[7]=A*i+b*l+E*d+y*M,A=r[8],b=r[9],E=r[10],y=r[11],t[8]=A*n+b*c+E*h+y*m,t[9]=A*a+b*u+E*f+y*g,t[10]=A*o+b*s+E*v+y*p,t[11]=A*i+b*l+E*d+y*M,A=r[12],b=r[13],E=r[14],y=r[15],t[12]=A*n+b*c+E*h+y*m,t[13]=A*a+b*u+E*f+y*g,t[14]=A*o+b*s+E*v+y*p,t[15]=A*i+b*l+E*d+y*M,t},mat4.mul=mat4.multiply,mat4.translate=function(t,e,r){var n,a,o,i,c,u,s,l,h,f,v,d,m=r[0],g=r[1],p=r[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*p+e[12],t[13]=e[1]*m+e[5]*g+e[9]*p+e[13],t[14]=e[2]*m+e[6]*g+e[10]*p+e[14],t[15]=e[3]*m+e[7]*g+e[11]*p+e[15]):(n=e[0],a=e[1],o=e[2],i=e[3],c=e[4],u=e[5],s=e[6],l=e[7],h=e[8],f=e[9],v=e[10],d=e[11],t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=c,t[5]=u,t[6]=s,t[7]=l,t[8]=h,t[9]=f,t[10]=v,t[11]=d,t[12]=n*m+c*g+h*p+e[12],t[13]=a*m+u*g+f*p+e[13],t[14]=o*m+s*g+v*p+e[14],t[15]=i*m+l*g+d*p+e[15]),t},mat4.scale=function(t,e,r){var n=r[0],a=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},mat4.rotate=function(t,e,r,n){var a,o,i,c,u,s,l,h,f,v,d,m,g,p,M,A,b,E,y,T,w,L,R,_,P=n[0],N=n[1],O=n[2],S=Math.sqrt(P*P+N*N+O*O);return Math.abs(S)<GLMAT_EPSILON?null:(S=1/S,P*=S,N*=S,O*=S,a=Math.sin(r),o=Math.cos(r),i=1-o,c=e[0],u=e[1],s=e[2],l=e[3],h=e[4],f=e[5],v=e[6],d=e[7],m=e[8],g=e[9],p=e[10],M=e[11],A=P*P*i+o,b=N*P*i+O*a,E=O*P*i-N*a,y=P*N*i-O*a,T=N*N*i+o,w=O*N*i+P*a,L=P*O*i+N*a,R=N*O*i-P*a,_=O*O*i+o,t[0]=c*A+h*b+m*E,t[1]=u*A+f*b+g*E,t[2]=s*A+v*b+p*E,t[3]=l*A+d*b+M*E,t[4]=c*y+h*T+m*w,t[5]=u*y+f*T+g*w,t[6]=s*y+v*T+p*w,t[7]=l*y+d*T+M*w,t[8]=c*L+h*R+m*_,t[9]=u*L+f*R+g*_,t[10]=s*L+v*R+p*_,t[11]=l*L+d*R+M*_,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},mat4.rotateX=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),o=e[4],i=e[5],c=e[6],u=e[7],s=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+s*n,t[5]=i*a+l*n,t[6]=c*a+h*n,t[7]=u*a+f*n,t[8]=s*a-o*n,t[9]=l*a-i*n,t[10]=h*a-c*n,t[11]=f*a-u*n,t},mat4.rotateY=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),o=e[0],i=e[1],c=e[2],u=e[3],s=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-s*n,t[1]=i*a-l*n,t[2]=c*a-h*n,t[3]=u*a-f*n,t[8]=o*n+s*a,t[9]=i*n+l*a,t[10]=c*n+h*a,t[11]=u*n+f*a,t},mat4.rotateZ=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),o=e[0],i=e[1],c=e[2],u=e[3],s=e[4],l=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+s*n,t[1]=i*a+l*n,t[2]=c*a+h*n,t[3]=u*a+f*n,t[4]=s*a-o*n,t[5]=l*a-i*n,t[6]=h*a-c*n,t[7]=f*a-u*n,t},mat4.fromRotationTranslation=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],c=n+n,u=a+a,s=o+o,l=n*c,h=n*u,f=n*s,v=a*u,d=a*s,m=o*s,g=i*c,p=i*u,M=i*s;return t[0]=1-(v+m),t[1]=h+M,t[2]=f-p,t[3]=0,t[4]=h-M,t[5]=1-(l+m),t[6]=d+g,t[7]=0,t[8]=f+p,t[9]=d-g,t[10]=1-(l+v),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},mat4.fromQuat=function(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=r+r,c=n+n,u=a+a,s=r*i,l=n*i,h=n*c,f=a*i,v=a*c,d=a*u,m=o*i,g=o*c,p=o*u;return t[0]=1-h-d,t[1]=l+p,t[2]=f-g,t[3]=0,t[4]=l-p,t[5]=1-s-d,t[6]=v+m,t[7]=0,t[8]=f+g,t[9]=v-m,t[10]=1-s-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},mat4.frustum=function(t,e,r,n,a,o,i){var c=1/(r-e),u=1/(a-n),s=1/(o-i);return t[0]=2*o*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(r+e)*c,t[9]=(a+n)*u,t[10]=(i+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*s,t[15]=0,t},mat4.perspective=function(t,e,r,n,a){var o=1/Math.tan(e/2),i=1/(n-a);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+n)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*n*i,t[15]=0,t},mat4.perspectiveFromFieldOfView=function(t,e,r,n){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),c=Math.tan(e.rightDegrees*Math.PI/180),u=2/(i+c),s=2/(a+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-((i-c)*u*.5),t[9]=(a-o)*s*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},mat4.ortho=function(t,e,r,n,a,o,i){var c=1/(e-r),u=1/(n-a),s=1/(o-i);return t[0]=-2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(e+r)*c,t[13]=(a+n)*u,t[14]=(i+o)*s,t[15]=1,t},mat4.lookAt=function(t,e,r,n){var a,o,i,c,u,s,l,h,f,v,d=e[0],m=e[1],g=e[2],p=n[0],M=n[1],A=n[2],b=r[0],E=r[1],y=r[2];return Math.abs(d-b)<GLMAT_EPSILON&&Math.abs(m-E)<GLMAT_EPSILON&&Math.abs(g-y)<GLMAT_EPSILON?mat4.identity(t):(l=d-b,h=m-E,f=g-y,v=1/Math.sqrt(l*l+h*h+f*f),l*=v,h*=v,f*=v,a=M*f-A*h,o=A*l-p*f,i=p*h-M*l,v=Math.sqrt(a*a+o*o+i*i),v?(v=1/v,a*=v,o*=v,i*=v):(a=0,o=0,i=0),c=h*i-f*o,u=f*a-l*i,s=l*o-h*a,v=Math.sqrt(c*c+u*u+s*s),v?(v=1/v,c*=v,u*=v,s*=v):(c=0,u=0,s=0),t[0]=a,t[1]=c,t[2]=l,t[3]=0,t[4]=o,t[5]=u,t[6]=h,t[7]=0,t[8]=i,t[9]=s,t[10]=f,t[11]=0,t[12]=-(a*d+o*m+i*g),t[13]=-(c*d+u*m+s*g),t[14]=-(l*d+h*m+f*g),t[15]=1,t)},mat4.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},mat4.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},"undefined"!=typeof exports&&(exports.mat4=mat4);var vec3={};vec3.create=function(){var t=new GLMAT_ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},vec3.clone=function(t){var e=new GLMAT_ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},vec3.fromValues=function(t,e,r){var n=new GLMAT_ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n},vec3.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},vec3.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},vec3.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},vec3.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},vec3.sub=vec3.subtract,vec3.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},vec3.mul=vec3.multiply,vec3.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},vec3.div=vec3.divide,vec3.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},vec3.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},vec3.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},vec3.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},vec3.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(r*r+n*n+a*a)},vec3.dist=vec3.distance,vec3.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a},vec3.sqrDist=vec3.squaredDistance,vec3.length=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)},vec3.len=vec3.length,vec3.squaredLength=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n},vec3.sqrLen=vec3.squaredLength,vec3.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},vec3.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},vec3.normalize=function(t,e){var r=e[0],n=e[1],a=e[2],o=r*r+n*n+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},vec3.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},vec3.cross=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=r[0],c=r[1],u=r[2];return t[0]=a*u-o*c,t[1]=o*i-n*u,t[2]=n*c-a*i,t},vec3.lerp=function(t,e,r,n){var a=e[0],o=e[1],i=e[2];return t[0]=a+n*(r[0]-a),t[1]=o+n*(r[1]-o),t[2]=i+n*(r[2]-i),t},vec3.random=function(t,e){e=e||1;var r=2*GLMAT_RANDOM()*Math.PI,n=2*GLMAT_RANDOM()-1,a=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=n*e,t},vec3.transformMat4=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=r[3]*n+r[7]*a+r[11]*o+r[15];return i=i||1,t[0]=(r[0]*n+r[4]*a+r[8]*o+r[12])/i,t[1]=(r[1]*n+r[5]*a+r[9]*o+r[13])/i,t[2]=(r[2]*n+r[6]*a+r[10]*o+r[14])/i,t},vec3.transformMat3=function(t,e,r){var n=e[0],a=e[1],o=e[2];return t[0]=n*r[0]+a*r[3]+o*r[6],t[1]=n*r[1]+a*r[4]+o*r[7],t[2]=n*r[2]+a*r[5]+o*r[8],t},vec3.transformQuat=function(t,e,r){var n=e[0],a=e[1],o=e[2],i=r[0],c=r[1],u=r[2],s=r[3],l=s*n+c*o-u*a,h=s*a+u*n-i*o,f=s*o+i*a-c*n,v=-i*n-c*a-u*o;return t[0]=l*s+v*-i+h*-u-f*-c,t[1]=h*s+v*-c+f*-i-l*-u,t[2]=f*s+v*-u+l*-c-h*-i,t},vec3.rotateX=function(t,e,r,n){var a=[],o=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],o[0]=a[0],o[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),o[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},vec3.rotateY=function(t,e,r,n){var a=[],o=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],o[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),o[1]=a[1],o[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},vec3.rotateZ=function(t,e,r,n){var a=[],o=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],o[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),o[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),o[2]=a[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},vec3.forEach=function(){var t=vec3.create();return function(e,r,n,a,o,i){var c,u;for(r||(r=3),n||(n=0),u=a?Math.min(a*r+n,e.length):e.length,c=n;u>c;c+=r)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],o(t,t,i),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2];return e}}(),vec3.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof exports&&(exports.vec3=vec3),function(){function t(t,r,a){if(t.length)return console.error.apply(console,t);a.useProgram(r),a.enable(a.DEPTH_TEST);var o=l.getUniforms(a,r),i=n(a,o);a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),e(a,r,function(t){var e=performance.now();!function r(n){var u=n-e;e=n,mat4.rotateY(i,i,c(u*d)),a.uniformMatrix4fv(o.uModel,!1,i),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.drawElements(a.TRIANGLES,t,a.UNSIGNED_SHORT,0),requestAnimationFrame(r)}(e)})}function e(t,e,n){var a=l.getAttributes(t,e),o=Sierpinski();r(t,t.ARRAY_BUFFER,new Float32Array(o.vertices),3,a.aPosition),r(t,t.ARRAY_BUFFER,new Float32Array(o.normals),3,a.aNormal),r(t,t.ELEMENT_ARRAY_BUFFER,new Uint16Array(o.indices)),n(o.indices.length)}function r(t,e,r,n,a){var o=t.createBuffer();if(!o)throw new Error("Failed to create buffer");t.bindBuffer(e,o),t.bufferData(e,r,t.STATIC_DRAW),e===t.ARRAY_BUFFER&&(t.vertexAttribPointer(a,n,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a))}function n(t,e){var r=a();return t.uniformMatrix4fv(e.uModel,!1,r),t.uniformMatrix4fv(e.uView,!1,o()),t.uniformMatrix4fv(e.uProj,!1,i()),r}function a(){var t=mat4.create();return mat4.scale(t,t,vec3.fromValues(1.8,1.8,1.8)),t}function o(){var t=vec3.fromValues(2,2,3),e=vec3.fromValues(0,0,0),r=vec3.fromValues(0,1,0),n=mat4.create();return mat4.lookAt(n,t,e,r),n}function i(){var t=mat4.create();return mat4.perspective(t,c(75),h,.01,50),t}function c(t){return t*Math.PI/180}function u(t){return.36/t}function s(){console.log("here I am ^_^ "),console.log(this);var e=parseInt(this.getAttribute("width"),10),r=parseInt(this.getAttribute("height"),10);if(isNaN(e)||isNaN(r))return console.error("width and height attributes required");var n=document.createElement("canvas");n.width=e,n.height=r,h=e/r;var a=n.getContext("webgl",{preserveDrawingBuffer:!0});l=new WebGLShaderLoader(a),l.loadFromStr(f,v,t),this.appendChild(n)}{var l,h,f="uniform mat4 uView;\nuniform mat4 uProj;\nuniform mat4 uModel;\n\nattribute vec4 aPosition;\nattribute vec4 aNormal;\n\nvarying vec3 vNormal;\nvarying vec3 vPosition;\n\nvoid main () {\n  vNormal = vec3(uModel * aNormal);\n  vPosition = vec3(uModel * aPosition);\n\n  gl_Position = uProj * uView * uModel * aPosition;\n}",v="precision mediump float;\n\nvarying vec3 vNormal;\nvarying vec3 vPosition;\n\nvec3 lightPosition = vec3(2, 2, 0);\nvec3 ambient = vec3(0.3);\nvec3 lightColor = vec3(1.0);\n\nvoid main () {\n  vec3 n = normalize(vNormal);\n  vec3 l = lightPosition - vPosition;\n\n  float nDotL = clamp(dot(n, normalize(l)) / length(l) * 2.0, 0.0, 1.0);\n  vec3 color = abs(n);\n\n  gl_FragColor = vec4(color, 1.0);\n}",d=u(10);document.registerElement("geo-metry",{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:s},attachedCallback:{value:function(){console.log("live on DOM ;-) ")}},detachedCallback:{value:function(){console.log("leaving the DOM :-( )")}},attributeChangedCallback:{value:function(t,e,r){null==e?console.log("got a new attribute ",t," with value ",r):null==r?console.log("somebody removed ",t," its value was ",e):console.log(t," changed from ",e," to ",r)}}})})}}();