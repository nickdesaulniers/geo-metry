/* This project (geo-metry) is Copyright 2014 Nick Desaulniers licensed under
 * the Beerware License.
 * https://raw.githubusercontent.com/nickdesaulniers/geo-metry/master/LICENSE.md
 *
 * This project contains Free and Open Source code from the following authors:
 *
 * webgl-shader-loader is Copyright 2014 Nick Desaulniers dual licensed under
 * the Beerware License & MPL2.0.
 * https://raw.githubusercontent.com/nickdesaulniers/webgl-shader-loader/master/LICENSE
 *
 * prims is Copywrite 2014 Nick Desaulniers licensed under the Beerware
 * License.
 * https://raw.githubusercontent.com/nickdesaulniers/prims/master/LICENSE.md
 *
 * document-register-element is Copywrite 2014 WebReflection licensed under the
 * MIT license.
 * https://raw.githubusercontent.com/WebReflection/document-register-element/master/LICENSE.txt
 *
 * gl-matrix is Copywrite 2013 Brandon Jones, Colin MacKenzie IV licensed under
 * the zlib license.
 * https://raw.githubusercontent.com/toji/gl-matrix/master/LICENSE.md
 *
 * color-strings is Copywrite 2011 Heather Arthur licensed under the MIT
 * license.
 * https://raw.githubusercontent.com/harthur/color-string/master/LICENSE
 */

!function(){function r(){function r(r,t){return[r[0]-t[0],r[1]-t[1],r[2]-t[2]]}function t(r,t){return[r[1]*t[2]-r[2]*t[1],r[2]*t[0]-r[0]*t[2],r[0]*t[1]-r[1]*t[0]]}function e(r){var t=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];return[r[0]/t,r[1]/t,r[2]/t]}for(var n=[1,1,1,-1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,-1,1,1,1,1,-1,-1,-1,-1,1,1,1,1,-1,-1,1,-1,1,-1],a=[0,1,2,3,4,5,6,7,8,9,10,11],o=[],i=0;i<n.length;i+=9){var u=[n[i],n[i+1],n[i+2]],s=[n[i+3],n[i+4],n[i+5]],c=[n[i+6],n[i+7],n[i+8]],l=e(t(r(u,s),r(u,c)));o=o.concat(l,l,l)}return{vertices:n,indices:a,normals:o}}function t(){var r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,-1,1,-1,-1,1,1,1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,-1,1,-1,-1,1,-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1],t=[0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1],e=[1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0],n=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];return{vertices:r,textures:e,normals:t,indices:n}}function e(){function r(r,t){return[r[0]-t[0],r[1]-t[1],r[2]-t[2]]}function t(r,t){return[r[1]*t[2]-r[2]*t[1],r[2]*t[0]-r[0]*t[2],r[0]*t[1]-r[1]*t[0]]}function e(r){var t=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];return[r[0]/t,r[1]/t,r[2]/t]}for(var n=1/Math.sqrt(2),a=1,o=[-n,0,n,-n,0,-n,0,a,0,-n,0,-n,n,0,-n,0,a,0,n,0,-n,n,0,n,0,a,0,n,0,n,-n,0,n,0,a,0,n,0,-n,-n,0,-n,0,-a,0,-n,0,-n,-n,0,n,0,-a,0,n,0,n,n,0,-n,0,-a,0,-n,0,n,n,0,n,0,-a,0],i=new Array(o.length),u=0;u<i.length/3;++u)i[u]=u;for(var s=[],u=0;u<o.length;u+=9){var n=[o[u],o[u+1],o[u+2]],a=[o[u+3],o[u+4],o[u+5]],c=[o[u+6],o[u+7],o[u+8]],l=e(t(r(n,a),r(n,c)));s=s.concat(l,l,l)}return{vertices:o,indices:i,normals:s}}function n(){function r(r,t){return[r[0]-t[0],r[1]-t[1],r[2]-t[2]]}function t(r,t){return[r[1]*t[2]-r[2]*t[1],r[2]*t[0]-r[0]*t[2],r[0]*t[1]-r[1]*t[0]]}function e(r){var t=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];return[r[0]/t,r[1]/t,r[2]/t]}for(var n=(1+Math.sqrt(5))/2,a=1/n,o=2-n,i=[o,0,1,-o,0,1,-a,a,a,0,1,o,a,a,a,-o,0,1,o,0,1,a,-a,a,0,-1,o,-a,-a,a,o,0,-1,-o,0,-1,-a,-a,-a,0,-1,-o,a,-a,-a,-o,0,-1,o,0,-1,a,a,-a,0,1,-o,-a,a,-a,0,1,-o,0,1,o,a,a,a,1,o,0,a,a,-a,0,1,o,0,1,-o,-a,a,-a,-1,o,0,-a,a,a,0,-1,-o,0,-1,o,-a,-a,a,-1,-o,0,-a,-a,-a,0,-1,o,0,-1,-o,a,-a,-a,1,-o,0,a,-a,a,1,o,0,1,-o,0,a,-a,a,o,0,1,a,a,a,1,-o,0,1,o,0,a,a,-a,o,0,-1,a,-a,-a,-1,o,0,-1,-o,0,-a,-a,-a,-o,0,-1,-a,a,-a,-1,-o,0,-1,o,0,-a,a,a,-o,0,1,-a,-a,a],u=[],s=0;s<i.length;s+=15){var c=[i[s],i[s+1],i[s+2]],a=[i[s+3],i[s+4],i[s+5]],o=[i[s+6],i[s+7],i[s+8]],l=[i[s+9],i[s+10],i[s+11]],h=[i[s+12],i[s+13],i[s+14]],f=[(c[0]+a[0]+o[0]+l[0]+h[0])/5,(c[1]+a[1]+o[1]+l[1]+h[1])/5,(c[2]+a[2]+o[2]+l[2]+h[2])/5];u.push.apply(u,c),u.push.apply(u,a),u.push.apply(u,f),u.push.apply(u,a),u.push.apply(u,o),u.push.apply(u,f),u.push.apply(u,o),u.push.apply(u,l),u.push.apply(u,f),u.push.apply(u,l),u.push.apply(u,h),u.push.apply(u,f),u.push.apply(u,h),u.push.apply(u,c),u.push.apply(u,f)}for(var v=new Array(u.length/3),s=0;s<v.length;++s)v[s]=s;for(var d=[],s=0;s<u.length;s+=9){var c=[u[s],u[s+1],u[s+2]],a=[u[s+3],u[s+4],u[s+5]],o=[u[s+6],u[s+7],u[s+8]],g=e(t(r(c,a),r(c,o)));d=d.concat(g,g,g)}return{vertices:u,indices:v,normals:d}}function a(){function r(r,t){return[r[0]-t[0],r[1]-t[1],r[2]-t[2]]}function t(r,t){return[r[1]*t[2]-r[2]*t[1],r[2]*t[0]-r[0]*t[2],r[0]*t[1]-r[1]*t[0]]}function e(r){var t=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];return[r[0]/t,r[1]/t,r[2]/t]}for(var n=(1+Math.sqrt(5))/2,a=1,o=1/n,i=[0,o,-a,o,a,0,-o,a,0,0,o,a,-o,a,0,o,a,0,0,o,a,0,-o,a,-a,0,o,0,o,a,a,0,o,0,-o,a,0,o,-a,0,-o,-a,a,0,-o,0,o,-a,-a,0,-o,0,-o,-a,0,-o,a,o,-a,0,-o,-a,0,0,-o,-a,-o,-a,0,o,-a,0,-o,a,0,-a,0,o,-a,0,-o,-o,-a,0,-a,0,-o,-a,0,o,o,a,0,a,0,-o,a,0,o,o,-a,0,a,0,o,a,0,-o,0,o,a,-a,0,o,-o,a,0,0,o,a,o,a,0,a,0,o,0,o,-a,-o,a,0,-a,0,-o,0,o,-a,a,0,-o,o,a,0,0,-o,-a,-a,0,-o,-o,-a,0,0,-o,-a,o,-a,0,a,0,-o,0,-o,a,-o,-a,0,-a,0,o,0,-o,a,a,0,o,o,-a,0],u=[],s=0;s<i.length;s+=9){var a=[i[s],i[s+1],i[s+2]],o=[i[s+3],i[s+4],i[s+5]],c=[i[s+6],i[s+7],i[s+8]],l=e(t(r(a,o),r(a,c)));u=u.concat(l,l,l)}for(var h=new Array(i.length/3),s=0;s<h.length;++s)h[s]=s;return{vertices:i,indices:h,normals:u}}function o(){function r(r,t){return[r[0]-t[0],r[1]-t[1],r[2]-t[2]]}function t(r,t){return[r[1]*t[2]-r[2]*t[1],r[2]*t[0]-r[0]*t[2],r[0]*t[1]-r[1]*t[0]]}function e(r){var t=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];return[r[0]/t,r[1]/t,r[2]/t]}for(var n=20,a=1,o=2*Math.PI/n,i=9*n,u=[],s=0,c=0;i>c;c+=9)u[c]=Math.cos(s),u[c+1]=a,u[c+2]=Math.sin(s),s+=o,u[c+3]=0,u[c+4]=a,u[c+5]=0,u[c+6]=Math.cos(s),u[c+7]=a,u[c+8]=Math.sin(s);for(s=0;i+i>c;c+=9)u[c]=Math.cos(s),u[c+1]=-a,u[c+2]=Math.sin(s),s+=o,u[c+3]=0,u[c+4]=-a,u[c+5]=0,u[c+6]=Math.cos(s),u[c+7]=-a,u[c+8]=Math.sin(s);for(var l=0;n>l;++l){for(var h=0;3>h;++h,++c)u[c]=u[0+h+9*l];for(var h=0;3>h;++h,++c)u[c]=u[6+h+9*l];for(var h=0;3>h;++h,++c)u[c]=u[i+h+9*l];for(var h=0;3>h;++h,++c)u[c]=u[i+h+9*l];for(var h=0;3>h;++h,++c)u[c]=u[6+h+9*l];for(var h=0;3>h;++h,++c)u[c]=u[i+6+h+9*l]}var f=new Array(u.length/3);for(c=0;c<f.length;++c)f[c]=c;for(var v=[],c=0;c<u.length;c+=9){var d=[u[c],u[c+1],u[c+2]],g=[u[c+3],u[c+4],u[c+5]],p=[u[c+6],u[c+7],u[c+8]],m=e(t(r(d,g),r(d,p)));v=v.concat(m,m,m)}return{vertices:u,indices:f,normals:v}}function i(){function r(r,t){return[r[0]-t[0],r[1]-t[1],r[2]-t[2]]}function t(r,t){return[r[1]*t[2]-r[2]*t[1],r[2]*t[0]-r[0]*t[2],r[0]*t[1]-r[1]*t[0]]}function e(r){var t=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];return[r[0]/t,r[1]/t,r[2]/t]}var n=20,a=1,o=2*Math.PI/n,i=9*n,u=[],s=0,c=0;for(s=0;i>c;c+=9)u[c]=Math.cos(s),u[c+1]=-a,u[c+2]=Math.sin(s),s+=o,u[c+3]=0,u[c+4]=-a,u[c+5]=0,u[c+6]=Math.cos(s),u[c+7]=-a,u[c+8]=Math.sin(s);for(var l=0;n>l;++l){for(var h=0;3>h;++h,++c)u[c]=u[0+h+9*l];for(var h=0;3>h;++h,++c)u[c]=u[6+h+9*l];u[c++]=0,u[c++]=a,u[c++]=0}var f=new Array(u.length/3);for(c=0;c<f.length;++c)f[c]=c;for(var v=[],c=0;c<u.length;c+=9){var d=[u[c],u[c+1],u[c+2]],g=[u[c+3],u[c+4],u[c+5]],p=[u[c+6],u[c+7],u[c+8]],m=e(t(r(d,g),r(d,p)));v=v.concat(m,m,m)}return{vertices:u,indices:f,normals:v}}function u(){for(var r=[],t=[],e=[],n=[],a=30,o=30,i=1,u=0;a>=u;++u)for(var s=u*Math.PI/a,c=Math.sin(s),l=Math.cos(s),h=0;o>=h;++h){var f=2*h*Math.PI/o,v=Math.sin(f),d=Math.cos(f),g=d*c,p=l,m=v*c,M=1-h/o,y=1-u/a;e.push(g,p,m),t.push(M,y),r.push(i*g,i*p,i*m)}for(u=0;a>u;++u)for(h=0;o>h;++h){var b=u*(o+1)+h,w=b+o+1;n.push(b,w,b+1,w,w+1,b+1)}return{vertices:r,textures:t,normals:e,indices:n}}function s(){function r(r,e,a,o){var i=Math.cos(r),u=Math.cos(a),s=Math.sin(r),c=Math.sin(a),l=e*i,h=-e*s,f=u*i,v=c,d=-u*s,g=l+o*f,p=o*v,m=h+o*d;n.push(f,v,d),t.push(g,p,m)}for(var t=[],e=[],n=[],a=1,o=.4,i=30,u=30,s=2*Math.PI/i,c=2*Math.PI/u,l=0,h=s,f=0,v=0;i>v;++v,l=h,h+=s)for(var d=0,g=c,p=0;u>p;++p,d=g,g+=c)r(l,a,d,o),r(h,a,d,o),r(h,a,g,o),r(l,a,g,o),e.push(f,f+1,f+2),e.push(f,f+2,f+3),f+=4;return{vertices:t,indices:e,normals:n}}function c(){function r(r,t,e){var n=Math.min(r.length,t.length),a=new Array(n);if(e>1||0>e)throw new Error("bad percent");for(var o=0;n>o;++o)a[o]=r[o]*(1-e)+t[o]*e;return a}function t(e,n,a,o,i){if(0===i)return e.concat(a,n).concat(e.concat(a,o),e.concat(n,o),n.concat(a,o));var u=r(e,n,.5),s=r(e,a,.5),c=r(e,o,.5),l=r(n,a,.5),h=r(n,o,.5),f=r(a,o,.5);return--i,t(e,u,s,c,i).concat(t(u,n,l,h,i),t(s,l,a,f,i),t(c,h,f,o,i))}function e(r,t){return[r[0]-t[0],r[1]-t[1],r[2]-t[2]]}function n(r,t){return[r[1]*t[2]-r[2]*t[1],r[2]*t[0]-r[0]*t[2],r[0]*t[1]-r[1]*t[0]]}function a(r){var t=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];return[r[0]/t,r[1]/t,r[2]/t]}var o=[[0,0,-1],[0,.9428,.3333],[-.8165,-.4714,.3333],[.8165,-.4714,.3333]];const i=3;for(var u=t(o[0],o[1],o[2],o[3],i),s=new Array(u.length),c=0;c<s.length/3;++c)s[c]=c;for(var l=[],c=0;c<u.length;c+=9){var h=[u[c],u[c+1],u[c+2]],f=[u[c+3],u[c+4],u[c+5]],v=[u[c+6],u[c+7],u[c+8]],d=a(n(e(h,f),e(h,v)));l=l.concat(d,d,d)}return{vertices:u,indices:s,normals:l}}var l=function(){function r(r){this.errors=[],this.vertexShader=this.fragmentShader=null,this.gl=t(r),this.gl||this.errors.push("webgl unsupported")}function t(r){return r instanceof HTMLCanvasElement?r.getContext("webgl")||r.getContext("experimental-webgl"):r}function e(r,t){function e(){++u===a&&t(i,o)}function n(r){i.push("Failed to load "+r.target.src),e()}for(var a=r.length,o=[],i=[],u=0,s=0;a>s;++s)o[s]=new Image,o[s].onload=e,o[s].onerror=n,o[s].src=r[s]}function n(r,t){var e="getActive"+t,n="get"+t+"Location";return function(t,a){for(var o=t.getProgramParameter(a,r),i={},u=null,s=0;o>s;++s)u=t[e](a,s).name,i[u]=t[n](a,u);return i}}var a=WebGLRenderingContext.prototype.VERTEX_SHADER,o=WebGLRenderingContext.prototype.FRAGMENT_SHADER;r.prototype={loadFromStr:function(r,t,e){"string"!=typeof r||"string"!=typeof t||"function"!=typeof e?(this.errors.push("Usage: loaderInstance.loadFromStr('', '', function (errors, program));"),e(this.errors,null,this.gl)):0===r.length||0===t.length?(this.errors.push("empty shader string"),e(this.errors,null,this.gl)):(this.vertexShader=this.compile(a,r),this.fragmentShader=this.compile(o,t),e(this.errors,this.link(),this.gl))},loadFromXHR:function(r,t,e){if("string"!=typeof r||"string"!=typeof t||"function"!=typeof e)return this.errors.push("Usage: loaderInstance.loadFromXHR('', '', function (errors, program));"),void e(this.errors,null,this.gl);if(0===r.length||0===t.length)return this.errors.push("empty shader path"),void e(this.errors,null,this.gl);var n=0,i=function(r,t){return function(a,o){return a?(this[r]=this.compile(t,o),void(++n>1&&e(this.errors,this.link(),this.gl))):(this.errors.push("xhr non 200 response code"),void e(this.errors,null,this.gl))}.bind(this)}.bind(this);this.fetch(r,i("vertexShader",a)),this.fetch(t,i("fragmentShader",o))},compile:function(r,t){var e=this.gl.createShader(r);return this.gl.shaderSource(e,t),this.gl.compileShader(e),this.gl.getShaderParameter(e,this.gl.COMPILE_STATUS)||this.errors.push(this.gl.getShaderInfoLog(e)),e},link:function(){var r=this.gl.createProgram();return this.gl.attachShader(r,this.vertexShader),this.gl.attachShader(r,this.fragmentShader),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS)||this.errors.push(this.gl.getProgramInfoLog(r)),r},fetch:function(r,t){var e=new XMLHttpRequest;e.open("GET",r),e.onload=function(){t(200===e.status,e.response)},e.send()}};var i=WebGLRenderingContext.prototype,u=n(i.ACTIVE_ATTRIBUTES,"Attrib"),s=n(i.ACTIVE_UNIFORMS,"Uniform");return r.prototype.getAttributes=u,r.prototype.getUniforms=s,r.load=function(n,a,o,i){o=o||[];var c=0,l=!1,h=!o.length,f=a.length,v=[],d=[],g=[],p=t(n);p||v.push("webgl unsupported"),h||e(o,function(r,t){r.length&&v.concat(r),g=t,h=!0,l&&i(v,p,d,g)}),a.forEach(function(t,e){if(e%2!==1){var n=new r(p);n.loadFromXHR(a[e],a[e+1],function(r,t){r.length&&v.concat(r),d[e/2]={attributes:u(p,t),program:t,uniforms:s(p,t)},++c===f/2&&(l=!0,h&&i(v,p,d,g))})}})},r}();if(function(r,t,e,n){"use strict";function a(r,t){for(var e=0,n=r.length;n>e;e++)f(r[e],t)}function o(r){for(var t,e=0,n=r.length;n>e;e++)t=r[e],h(t,E[u(t)])}function i(r){return function(t){x.call(H,t)&&(f(t,r),a(t.querySelectorAll(F),r))}}function u(r){var t=r.getAttribute("is");return C.call(k,t?t.toUpperCase():r.nodeName)}function s(r){var t=r.currentTarget,e=r.attrChange,n=r.prevValue,a=r.newValue;t.attributeChangedCallback&&"style"!==r.attrName&&t.attributeChangedCallback(r.attrName,e===r.ADDITION?null:n,e===r.REMOVAL?null:a)}function c(r){var t=i(r);return function(r){t(r.target)}}function l(r,t){var e=this;G.call(e,r,t),v.call(e,{target:e})}function h(r,t){D(r,t),p?p.observe(r,Y):(W&&(r.setAttribute=l,r[m]=g(r),r.addEventListener(b,v)),r.addEventListener(y,s)),r.createdCallback&&(r.created=!0,r.createdCallback(),r.created=!1)}function f(r,t){var e,n=u(r),a="attached",o="detached";n>-1&&(U(r,E[n]),n=0,t!==a||r[a]?t!==o||r[o]||(r[a]=!1,r[o]=!0,n=1):(r[o]=!1,r[a]=!0,n=1),n&&(e=r[t+"Callback"])&&e.call(r))}if(!(n in t)){var v,d,g,p,m="__"+n+(1e5*Math.random()>>0),M="extends",y="DOMAttrModified",b="DOMSubtreeModified",w=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,A=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],k=[],E=[],F="",S=t.documentElement,C=k.indexOf||function(r){for(var t=this.length;t--&&this[t]!==r;);return t},N=e.prototype,I=N.hasOwnProperty,x=N.isPrototypeOf,O=e.defineProperty,P=e.getOwnPropertyDescriptor,R=e.getOwnPropertyNames,T=e.getPrototypeOf,L=e.setPrototypeOf,q=!!e.__proto__,_=e.create||function Z(r){return r?(Z.prototype=r,new Z):this},D=L||(q?function(r,t){return r.__proto__=t,r}:R&&P?function(){function r(r,t){for(var e,n=R(t),a=0,o=n.length;o>a;a++)e=n[a],I.call(r,e)||O(r,e,P(t,e))}return function(t,e){do r(t,e);while(e=T(e));return t}}():function(r,t){for(var e in t)r[e]=t[e];return r}),U=L||q?function(r,t){x.call(t,r)||h(r,t)}:function(r,t){r[m]||(r[m]=e(!0),h(r,t))},V=r.MutationObserver||r.WebKitMutationObserver,H=(r.HTMLElement||r.Element||r.Node).prototype,B=H.cloneNode,G=H.setAttribute,X=t.createElement,Y=V&&{attributes:!0,characterData:!0,attributeOldValue:!0},j=V||function(){W=!1,S.removeEventListener(y,j)},z=!1,W=!0;V||(S.addEventListener(y,j),S.setAttribute(m,1),S.removeAttribute(m),W&&(v=function(r){var t,e,n,a=this;if(a===r.target){t=a[m],a[m]=e=g(a);for(n in e){if(!(n in t))return d(0,a,n,t[n],e[n],"ADDITION");if(e[n]!==t[n])return d(1,a,n,t[n],e[n],"MODIFICATION")}for(n in t)if(!(n in e))return d(2,a,n,t[n],e[n],"REMOVAL")}},d=function(r,t,e,n,a,o){var i={attrChange:r,currentTarget:t,attrName:e,prevValue:n,newValue:a};i[o]=r,s(i)},g=function(r){for(var t,e,n={},a=r.attributes,o=0,i=a.length;i>o;o++)t=a[o],e=t.name,"setAttribute"!==e&&(n[e]=t.value);return n})),t[n]=function(r,e){if(n=r.toUpperCase(),z||(z=!0,V?(p=function(r,t){function e(r,t){for(var e=0,n=r.length;n>e;t(r[e++]));}return new V(function(n){for(var a,o,i=0,u=n.length;u>i;i++)a=n[i],"childList"===a.type?(e(a.addedNodes,r),e(a.removedNodes,t)):(o=a.target,o.attributeChangedCallback&&"style"!==a.attributeName&&o.attributeChangedCallback(a.attributeName,a.oldValue,o.getAttribute(a.attributeName)))})}(i("attached"),i("detached")),p.observe(t,{childList:!0,subtree:!0})):(t.addEventListener("DOMNodeInserted",c("attached")),t.addEventListener("DOMNodeRemoved",c("detached"))),t.addEventListener("readystatechange",function(){a(t.querySelectorAll(F),"attached")}),t.createElement=function(r,e){var n,a=X.apply(t,arguments);return e&&a.setAttribute("is",r=e.toLowerCase()),n=C.call(k,r.toUpperCase()),n>-1&&h(a,E[n]),a},H.cloneNode=function(r){var t=B.call(this,!!r),e=u(t);return e>-1&&h(t,E[e]),r&&o(t.querySelectorAll(F)),t}),-1<C.call(k,n))throw new Error("A "+r+" type is already registered");if(!w.test(n)||-1<C.call(A,n))throw new Error("The type "+r+" is invalid");var n,s=function(){return t.createElement(v,f&&n)},l=e||N,f=I.call(l,M),v=f?e[M]:n,d=k.push(n)-1;return F=F.concat(F.length?",":"",f?v+'[is="'+r.toLowerCase()+'"]':v),s.prototype=E[d]=I.call(l,"prototype")?l.prototype:_(H),a(t.querySelectorAll(F),"attached"),s}}}(window,document,Object,"registerElement"),!h)var h=1e-6;if(!f)var f="undefined"!=typeof Float32Array?Float32Array:Array;if(!d)var d=Math.random;var g={};g.setMatrixArrayType=function(r){f=r},"undefined"!=typeof exports&&(exports.glMatrix=g);var p=Math.PI/180;g.toRadian=function(r){return r*p};var m={};m.create=function(){var r=new f(16);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},m.clone=function(r){var t=new f(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},m.copy=function(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},m.identity=function(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},m.transpose=function(r,t){if(r===t){var e=t[1],n=t[2],a=t[3],o=t[6],i=t[7],u=t[11];r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=e,r[6]=t[9],r[7]=t[13],r[8]=n,r[9]=o,r[11]=t[14],r[12]=a,r[13]=i,r[14]=u}else r[0]=t[0],r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=t[1],r[5]=t[5],r[6]=t[9],r[7]=t[13],r[8]=t[2],r[9]=t[6],r[10]=t[10],r[11]=t[14],r[12]=t[3],r[13]=t[7],r[14]=t[11],r[15]=t[15];return r},m.invert=function(r,t){var e=t[0],n=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],l=t[8],h=t[9],f=t[10],v=t[11],d=t[12],g=t[13],p=t[14],m=t[15],M=e*u-n*i,y=e*s-a*i,b=e*c-o*i,w=n*s-a*u,A=n*c-o*u,k=a*c-o*s,E=l*g-h*d,F=l*p-f*d,S=l*m-v*d,C=h*p-f*g,N=h*m-v*g,I=f*m-v*p,x=M*I-y*N+b*C+w*S-A*F+k*E;return x?(x=1/x,r[0]=(u*I-s*N+c*C)*x,r[1]=(a*N-n*I-o*C)*x,r[2]=(g*k-p*A+m*w)*x,r[3]=(f*A-h*k-v*w)*x,r[4]=(s*S-i*I-c*F)*x,r[5]=(e*I-a*S+o*F)*x,r[6]=(p*b-d*k-m*y)*x,r[7]=(l*k-f*b+v*y)*x,r[8]=(i*N-u*S+c*E)*x,r[9]=(n*S-e*N-o*E)*x,r[10]=(d*A-g*b+m*M)*x,r[11]=(h*b-l*A-v*M)*x,r[12]=(u*F-i*C-s*E)*x,r[13]=(e*C-n*F+a*E)*x,r[14]=(g*y-d*w-p*M)*x,r[15]=(l*w-h*y+f*M)*x,r):null},m.adjoint=function(r,t){var e=t[0],n=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],l=t[8],h=t[9],f=t[10],v=t[11],d=t[12],g=t[13],p=t[14],m=t[15];return r[0]=u*(f*m-v*p)-h*(s*m-c*p)+g*(s*v-c*f),r[1]=-(n*(f*m-v*p)-h*(a*m-o*p)+g*(a*v-o*f)),r[2]=n*(s*m-c*p)-u*(a*m-o*p)+g*(a*c-o*s),r[3]=-(n*(s*v-c*f)-u*(a*v-o*f)+h*(a*c-o*s)),r[4]=-(i*(f*m-v*p)-l*(s*m-c*p)+d*(s*v-c*f)),r[5]=e*(f*m-v*p)-l*(a*m-o*p)+d*(a*v-o*f),r[6]=-(e*(s*m-c*p)-i*(a*m-o*p)+d*(a*c-o*s)),r[7]=e*(s*v-c*f)-i*(a*v-o*f)+l*(a*c-o*s),r[8]=i*(h*m-v*g)-l*(u*m-c*g)+d*(u*v-c*h),r[9]=-(e*(h*m-v*g)-l*(n*m-o*g)+d*(n*v-o*h)),r[10]=e*(u*m-c*g)-i*(n*m-o*g)+d*(n*c-o*u),r[11]=-(e*(u*v-c*h)-i*(n*v-o*h)+l*(n*c-o*u)),r[12]=-(i*(h*p-f*g)-l*(u*p-s*g)+d*(u*f-s*h)),r[13]=e*(h*p-f*g)-l*(n*p-a*g)+d*(n*f-a*h),r[14]=-(e*(u*p-s*g)-i*(n*p-a*g)+d*(n*s-a*u)),r[15]=e*(u*f-s*h)-i*(n*f-a*h)+l*(n*s-a*u),r},m.determinant=function(r){var t=r[0],e=r[1],n=r[2],a=r[3],o=r[4],i=r[5],u=r[6],s=r[7],c=r[8],l=r[9],h=r[10],f=r[11],v=r[12],d=r[13],g=r[14],p=r[15],m=t*i-e*o,M=t*u-n*o,y=t*s-a*o,b=e*u-n*i,w=e*s-a*i,A=n*s-a*u,k=c*d-l*v,E=c*g-h*v,F=c*p-f*v,S=l*g-h*d,C=l*p-f*d,N=h*p-f*g;return m*N-M*C+y*S+b*F-w*E+A*k},m.multiply=function(r,t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],l=t[7],h=t[8],f=t[9],v=t[10],d=t[11],g=t[12],p=t[13],m=t[14],M=t[15],y=e[0],b=e[1],w=e[2],A=e[3];return r[0]=y*n+b*u+w*h+A*g,r[1]=y*a+b*s+w*f+A*p,r[2]=y*o+b*c+w*v+A*m,r[3]=y*i+b*l+w*d+A*M,y=e[4],b=e[5],w=e[6],A=e[7],r[4]=y*n+b*u+w*h+A*g,r[5]=y*a+b*s+w*f+A*p,r[6]=y*o+b*c+w*v+A*m,r[7]=y*i+b*l+w*d+A*M,y=e[8],b=e[9],w=e[10],A=e[11],r[8]=y*n+b*u+w*h+A*g,r[9]=y*a+b*s+w*f+A*p,r[10]=y*o+b*c+w*v+A*m,r[11]=y*i+b*l+w*d+A*M,y=e[12],b=e[13],w=e[14],A=e[15],r[12]=y*n+b*u+w*h+A*g,r[13]=y*a+b*s+w*f+A*p,r[14]=y*o+b*c+w*v+A*m,r[15]=y*i+b*l+w*d+A*M,r},m.mul=m.multiply,m.translate=function(r,t,e){var n,a,o,i,u,s,c,l,h,f,v,d,g=e[0],p=e[1],m=e[2];return t===r?(r[12]=t[0]*g+t[4]*p+t[8]*m+t[12],r[13]=t[1]*g+t[5]*p+t[9]*m+t[13],r[14]=t[2]*g+t[6]*p+t[10]*m+t[14],r[15]=t[3]*g+t[7]*p+t[11]*m+t[15]):(n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],l=t[7],h=t[8],f=t[9],v=t[10],d=t[11],r[0]=n,r[1]=a,r[2]=o,r[3]=i,r[4]=u,r[5]=s,r[6]=c,r[7]=l,r[8]=h,r[9]=f,r[10]=v,r[11]=d,r[12]=n*g+u*p+h*m+t[12],r[13]=a*g+s*p+f*m+t[13],r[14]=o*g+c*p+v*m+t[14],r[15]=i*g+l*p+d*m+t[15]),r},m.scale=function(r,t,e){var n=e[0],a=e[1],o=e[2];return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r[3]=t[3]*n,r[4]=t[4]*a,r[5]=t[5]*a,r[6]=t[6]*a,r[7]=t[7]*a,r[8]=t[8]*o,r[9]=t[9]*o,r[10]=t[10]*o,r[11]=t[11]*o,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},m.rotate=function(r,t,e,n){var a,o,i,u,s,c,l,f,v,d,g,p,m,M,y,b,w,A,k,E,F,S,C,N,I=n[0],x=n[1],O=n[2],P=Math.sqrt(I*I+x*x+O*O);return Math.abs(P)<h?null:(P=1/P,I*=P,x*=P,O*=P,a=Math.sin(e),o=Math.cos(e),i=1-o,u=t[0],s=t[1],c=t[2],l=t[3],f=t[4],v=t[5],d=t[6],g=t[7],p=t[8],m=t[9],M=t[10],y=t[11],b=I*I*i+o,w=x*I*i+O*a,A=O*I*i-x*a,k=I*x*i-O*a,E=x*x*i+o,F=O*x*i+I*a,S=I*O*i+x*a,C=x*O*i-I*a,N=O*O*i+o,r[0]=u*b+f*w+p*A,r[1]=s*b+v*w+m*A,r[2]=c*b+d*w+M*A,r[3]=l*b+g*w+y*A,r[4]=u*k+f*E+p*F,r[5]=s*k+v*E+m*F,r[6]=c*k+d*E+M*F,r[7]=l*k+g*E+y*F,r[8]=u*S+f*C+p*N,r[9]=s*S+v*C+m*N,r[10]=c*S+d*C+M*N,r[11]=l*S+g*C+y*N,t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r)},m.rotateX=function(r,t,e){var n=Math.sin(e),a=Math.cos(e),o=t[4],i=t[5],u=t[6],s=t[7],c=t[8],l=t[9],h=t[10],f=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=o*a+c*n,r[5]=i*a+l*n,r[6]=u*a+h*n,r[7]=s*a+f*n,r[8]=c*a-o*n,r[9]=l*a-i*n,r[10]=h*a-u*n,r[11]=f*a-s*n,r},m.rotateY=function(r,t,e){var n=Math.sin(e),a=Math.cos(e),o=t[0],i=t[1],u=t[2],s=t[3],c=t[8],l=t[9],h=t[10],f=t[11];return t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=o*a-c*n,r[1]=i*a-l*n,r[2]=u*a-h*n,r[3]=s*a-f*n,r[8]=o*n+c*a,r[9]=i*n+l*a,r[10]=u*n+h*a,r[11]=s*n+f*a,r},m.rotateZ=function(r,t,e){var n=Math.sin(e),a=Math.cos(e),o=t[0],i=t[1],u=t[2],s=t[3],c=t[4],l=t[5],h=t[6],f=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=o*a+c*n,r[1]=i*a+l*n,r[2]=u*a+h*n,r[3]=s*a+f*n,r[4]=c*a-o*n,r[5]=l*a-i*n,r[6]=h*a-u*n,r[7]=f*a-s*n,r},m.fromRotationTranslation=function(r,t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=n+n,s=a+a,c=o+o,l=n*u,h=n*s,f=n*c,v=a*s,d=a*c,g=o*c,p=i*u,m=i*s,M=i*c;return r[0]=1-(v+g),r[1]=h+M,r[2]=f-m,r[3]=0,r[4]=h-M,r[5]=1-(l+g),r[6]=d+p,r[7]=0,r[8]=f+m,r[9]=d-p,r[10]=1-(l+v),r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r},m.fromQuat=function(r,t){var e=t[0],n=t[1],a=t[2],o=t[3],i=e+e,u=n+n,s=a+a,c=e*i,l=n*i,h=n*u,f=a*i,v=a*u,d=a*s,g=o*i,p=o*u,m=o*s;return r[0]=1-h-d,r[1]=l+m,r[2]=f-p,r[3]=0,r[4]=l-m,r[5]=1-c-d,r[6]=v+g,r[7]=0,r[8]=f+p,r[9]=v-g,r[10]=1-c-h,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},m.frustum=function(r,t,e,n,a,o,i){var u=1/(e-t),s=1/(a-n),c=1/(o-i);return r[0]=2*o*u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=2*o*s,r[6]=0,r[7]=0,r[8]=(e+t)*u,r[9]=(a+n)*s,r[10]=(i+o)*c,r[11]=-1,r[12]=0,r[13]=0,r[14]=i*o*2*c,r[15]=0,r},m.perspective=function(r,t,e,n,a){var o=1/Math.tan(t/2),i=1/(n-a);return r[0]=o/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=o,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(a+n)*i,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*a*n*i,r[15]=0,r},m.perspectiveFromFieldOfView=function(r,t,e,n){var a=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(a+o);return r[0]=s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=c,r[6]=0,r[7]=0,r[8]=-((i-u)*s*.5),r[9]=(a-o)*c*.5,r[10]=n/(e-n),r[11]=-1,r[12]=0,r[13]=0,r[14]=n*e/(e-n),r[15]=0,r},m.ortho=function(r,t,e,n,a,o,i){var u=1/(t-e),s=1/(n-a),c=1/(o-i);return r[0]=-2*u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*c,r[11]=0,r[12]=(t+e)*u,r[13]=(a+n)*s,r[14]=(i+o)*c,r[15]=1,r},m.lookAt=function(r,t,e,n){var a,o,i,u,s,c,l,f,v,d,g=t[0],p=t[1],M=t[2],y=n[0],b=n[1],w=n[2],A=e[0],k=e[1],E=e[2];return Math.abs(g-A)<h&&Math.abs(p-k)<h&&Math.abs(M-E)<h?m.identity(r):(l=g-A,f=p-k,v=M-E,d=1/Math.sqrt(l*l+f*f+v*v),l*=d,f*=d,v*=d,a=b*v-w*f,o=w*l-y*v,i=y*f-b*l,d=Math.sqrt(a*a+o*o+i*i),d?(d=1/d,a*=d,o*=d,i*=d):(a=0,o=0,i=0),u=f*i-v*o,s=v*a-l*i,c=l*o-f*a,d=Math.sqrt(u*u+s*s+c*c),d?(d=1/d,u*=d,s*=d,c*=d):(u=0,s=0,c=0),r[0]=a,r[1]=u,r[2]=l,r[3]=0,r[4]=o,r[5]=s,r[6]=f,r[7]=0,r[8]=i,r[9]=c,r[10]=v,r[11]=0,r[12]=-(a*g+o*p+i*M),r[13]=-(u*g+s*p+c*M),r[14]=-(l*g+f*p+v*M),r[15]=1,r)},m.str=function(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"},m.frob=function(r){return Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2)+Math.pow(r[3],2)+Math.pow(r[4],2)+Math.pow(r[5],2)+Math.pow(r[6],2)+Math.pow(r[7],2)+Math.pow(r[8],2)+Math.pow(r[9],2)+Math.pow(r[10],2)+Math.pow(r[11],2)+Math.pow(r[12],2)+Math.pow(r[13],2)+Math.pow(r[14],2)+Math.pow(r[15],2))},"undefined"!=typeof exports&&(exports.mat4=m);var M={};M.create=function(){var r=new f(3);return r[0]=0,r[1]=0,r[2]=0,r},M.clone=function(r){var t=new f(3);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t},M.fromValues=function(r,t,e){var n=new f(3);return n[0]=r,n[1]=t,n[2]=e,n},M.copy=function(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r},M.set=function(r,t,e,n){return r[0]=t,r[1]=e,r[2]=n,r},M.add=function(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r},M.subtract=function(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r},M.sub=M.subtract,M.multiply=function(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[1],r[2]=t[2]*e[2],r},M.mul=M.multiply,M.divide=function(r,t,e){return r[0]=t[0]/e[0],r[1]=t[1]/e[1],r[2]=t[2]/e[2],r},M.div=M.divide,M.min=function(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r[2]=Math.min(t[2],e[2]),r},M.max=function(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r[2]=Math.max(t[2],e[2]),r},M.scale=function(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r},M.scaleAndAdd=function(r,t,e,n){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r},M.distance=function(r,t){var e=t[0]-r[0],n=t[1]-r[1],a=t[2]-r[2];return Math.sqrt(e*e+n*n+a*a)},M.dist=M.distance,M.squaredDistance=function(r,t){var e=t[0]-r[0],n=t[1]-r[1],a=t[2]-r[2];return e*e+n*n+a*a},M.sqrDist=M.squaredDistance,M.length=function(r){var t=r[0],e=r[1],n=r[2];return Math.sqrt(t*t+e*e+n*n)},M.len=M.length,M.squaredLength=function(r){var t=r[0],e=r[1],n=r[2];return t*t+e*e+n*n},M.sqrLen=M.squaredLength,M.negate=function(r,t){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r},M.inverse=function(r,t){return r[0]=1/t[0],r[1]=1/t[1],r[2]=1/t[2],r},M.normalize=function(r,t){var e=t[0],n=t[1],a=t[2],o=e*e+n*n+a*a;return o>0&&(o=1/Math.sqrt(o),r[0]=t[0]*o,r[1]=t[1]*o,r[2]=t[2]*o),r},M.dot=function(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]},M.cross=function(r,t,e){var n=t[0],a=t[1],o=t[2],i=e[0],u=e[1],s=e[2];return r[0]=a*s-o*u,r[1]=o*i-n*s,r[2]=n*u-a*i,r},M.lerp=function(r,t,e,n){var a=t[0],o=t[1],i=t[2];return r[0]=a+n*(e[0]-a),r[1]=o+n*(e[1]-o),r[2]=i+n*(e[2]-i),r},M.random=function(r,t){t=t||1;var e=2*d()*Math.PI,n=2*d()-1,a=Math.sqrt(1-n*n)*t;return r[0]=Math.cos(e)*a,r[1]=Math.sin(e)*a,r[2]=n*t,r},M.transformMat4=function(r,t,e){var n=t[0],a=t[1],o=t[2],i=e[3]*n+e[7]*a+e[11]*o+e[15];return i=i||1,r[0]=(e[0]*n+e[4]*a+e[8]*o+e[12])/i,r[1]=(e[1]*n+e[5]*a+e[9]*o+e[13])/i,r[2]=(e[2]*n+e[6]*a+e[10]*o+e[14])/i,r},M.transformMat3=function(r,t,e){var n=t[0],a=t[1],o=t[2];return r[0]=n*e[0]+a*e[3]+o*e[6],r[1]=n*e[1]+a*e[4]+o*e[7],r[2]=n*e[2]+a*e[5]+o*e[8],r},M.transformQuat=function(r,t,e){var n=t[0],a=t[1],o=t[2],i=e[0],u=e[1],s=e[2],c=e[3],l=c*n+u*o-s*a,h=c*a+s*n-i*o,f=c*o+i*a-u*n,v=-i*n-u*a-s*o;return r[0]=l*c+v*-i+h*-s-f*-u,r[1]=h*c+v*-u+f*-i-l*-s,r[2]=f*c+v*-s+l*-u-h*-i,r},M.rotateX=function(r,t,e,n){var a=[],o=[];return a[0]=t[0]-e[0],a[1]=t[1]-e[1],a[2]=t[2]-e[2],o[0]=a[0],o[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),o[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),r[0]=o[0]+e[0],r[1]=o[1]+e[1],r[2]=o[2]+e[2],r},M.rotateY=function(r,t,e,n){var a=[],o=[];return a[0]=t[0]-e[0],a[1]=t[1]-e[1],a[2]=t[2]-e[2],o[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),o[1]=a[1],o[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),r[0]=o[0]+e[0],r[1]=o[1]+e[1],r[2]=o[2]+e[2],r},M.rotateZ=function(r,t,e,n){var a=[],o=[];return a[0]=t[0]-e[0],a[1]=t[1]-e[1],a[2]=t[2]-e[2],o[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),o[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),o[2]=a[2],r[0]=o[0]+e[0],r[1]=o[1]+e[1],r[2]=o[2]+e[2],r},M.forEach=function(){var r=M.create();return function(t,e,n,a,o,i){var u,s;for(e||(e=3),n||(n=0),s=a?Math.min(a*e+n,t.length):t.length,u=n;s>u;u+=e)r[0]=t[u],r[1]=t[u+1],r[2]=t[u+2],o(r,r,i),t[u]=r[0],t[u+1]=r[1],t[u+2]=r[2];return t}}(),M.str=function(r){return"vec3("+r[0]+", "+r[1]+", "+r[2]+")"},"undefined"!=typeof exports&&(exports.vec3=M),function y(r,t,e){function n(o,i){if(!t[o]){if(!r[o]){var u="function"==typeof require&&require;if(!i&&u)return u(o,!0);if(a)return a(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var c=t[o]={exports:{}};r[o][0].call(c.exports,function(t){var e=r[o][1][t];return n(e?e:t)},c,c.exports,y,r,t,e)}return t[o].exports}for(var a="function"==typeof require&&require,o=0;o<e.length;o++)n(e[o]);return n}({1:[function(r){colorString=r("./color-string")},{"./color-string":2}],2:[function(r,t){function e(r){if(r){var t=/^#([a-fA-F0-9]{3})$/,e=/^#([a-fA-F0-9]{6})$/,n=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\d\.]+)\s*)?\)$/,a=/^rgba?\(\s*([\d\.]+)\%\s*,\s*([\d\.]+)\%\s*,\s*([\d\.]+)\%\s*(?:,\s*([\d\.]+)\s*)?\)$/,o=/(\D+)/,i=[0,0,0],u=1,s=r.match(t);if(s){s=s[1];for(var c=0;c<i.length;c++)i[c]=parseInt(s[c]+s[c],16)}else if(s=r.match(e)){s=s[1];for(var c=0;c<i.length;c++)i[c]=parseInt(s.slice(2*c,2*c+2),16)}else if(s=r.match(n)){for(var c=0;c<i.length;c++)i[c]=parseInt(s[c+1]);u=parseFloat(s[4])}else if(s=r.match(a)){for(var c=0;c<i.length;c++)i[c]=Math.round(2.55*parseFloat(s[c+1]));u=parseFloat(s[4])}else if(s=r.match(o)){if("transparent"==s[1])return[0,0,0,0];if(i=y.keyword2rgb(s[1]),!i)return}for(var c=0;c<i.length;c++)i[c]=m(i[c],0,255);return u=u||0==u?m(u,0,1):1,i.push(u),i}}function n(r){if(r){var t=/^hsla?\(\s*(\d+)(?:deg)?\s*,\s*([\d\.]+)%\s*,\s*([\d\.]+)%\s*(?:,\s*([\d\.]+)\s*)?\)/,e=r.match(t);if(e){var n=m(parseInt(e[1]),0,360),a=m(parseFloat(e[2]),0,100),o=m(parseFloat(e[3]),0,100),i=m(parseFloat(e[4])||1,0,1);return[n,a,o,i]}}}function a(r){if(r){var t=/^hwb\(\s*(\d+)(?:deg)?\s*,\s*([\d\.]+)%\s*,\s*([\d\.]+)%\s*(?:,\s*([\d\.]+)\s*)?\)/,e=r.match(t);if(e){var n=m(parseInt(e[1]),0,360),a=m(parseFloat(e[2]),0,100),o=m(parseFloat(e[3]),0,100),i=m(parseFloat(e[4])||1,0,1);return[n,a,o,i]}}}function o(r){var t=e(r);return t&&t.slice(0,3)}function i(r){var t=n(r);return t&&t.slice(0,3)}function u(r){var t=e(r);return t?t[3]:(t=n(r))?t[3]:(t=a(r))?t[3]:void 0}function s(r){return"#"+M(r[0])+M(r[1])+M(r[2])}function c(r,t){return 1>t||r[3]&&r[3]<1?l(r,t):"rgb("+r[0]+", "+r[1]+", "+r[2]+")"}function l(r,t){return void 0===t&&(t=void 0!==r[3]?r[3]:1),"rgba("+r[0]+", "+r[1]+", "+r[2]+", "+t+")"}function h(r,t){if(1>t||r[3]&&r[3]<1)return f(r,t);var e=Math.round(r[0]/255*100),n=Math.round(r[1]/255*100),a=Math.round(r[2]/255*100);return"rgb("+e+"%, "+n+"%, "+a+"%)"}function f(r,t){var e=Math.round(r[0]/255*100),n=Math.round(r[1]/255*100),a=Math.round(r[2]/255*100);return"rgba("+e+"%, "+n+"%, "+a+"%, "+(t||r[3]||1)+")"}function v(r,t){return 1>t||r[3]&&r[3]<1?d(r,t):"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)"}function d(r,t){return void 0===t&&(t=void 0!==r[3]?r[3]:1),"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+t+")"}function g(r,t){return void 0===t&&(t=void 0!==r[3]?r[3]:1),"hwb("+r[0]+", "+r[1]+"%, "+r[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"}function p(r){return y.rgb2keyword(r.slice(0,3))}function m(r,t,e){return Math.min(Math.max(t,r),e)}function M(r){var t=r.toString(16).toUpperCase();return t.length<2?"0"+t:t}var y=r("color-convert");t.exports={getRgba:e,getHsla:n,getRgb:o,getHsl:i,getHwb:a,getAlpha:u,hexString:s,rgbString:c,rgbaString:l,percentString:h,percentaString:f,hslString:v,hslaString:d,hwbString:g,keyword:p}},{"color-convert":4}],3:[function(r,t){function e(r){var t,e,n,a=r[0]/255,o=r[1]/255,i=r[2]/255,u=Math.min(a,o,i),s=Math.max(a,o,i),c=s-u;return s==u?t=0:a==s?t=(o-i)/c:o==s?t=2+(i-a)/c:i==s&&(t=4+(a-o)/c),t=Math.min(60*t,360),0>t&&(t+=360),n=(u+s)/2,e=s==u?0:.5>=n?c/(s+u):c/(2-s-u),[t,100*e,100*n]}function n(r){var t,e,n=r[0],a=r[1],o=r[2],i=Math.min(n,a,o),u=Math.max(n,a,o),s=u-i;return e=0==u?0:s/u*1e3/10,u==i?t=0:n==u?t=(a-o)/s:a==u?t=2+(o-n)/s:o==u&&(t=4+(n-a)/s),t=Math.min(60*t,360),0>t&&(t+=360),v=u/255*1e3/10,[t,e,v]}function a(r){var t,e,n,a,o=r[0]/255,i=r[1]/255,u=r[2]/255;return a=Math.min(1-o,1-i,1-u),t=(1-o-a)/(1-a),e=(1-i-a)/(1-a),n=(1-u-a)/(1-a),[100*t,100*e,100*n,100*a]}function o(r){return C[JSON.stringify(r)]
}function i(r){var t=r[0]/255,e=r[1]/255,n=r[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var a=.4124*t+.3576*e+.1805*n,o=.2126*t+.7152*e+.0722*n,i=.0193*t+.1192*e+.9505*n;return[100*a,100*o,100*i]}function u(r){var t,e,n,a=i(r),o=a[0],u=a[1],s=a[2];return o/=95.047,u/=100,s/=108.883,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,t=116*u-16,e=500*(o-u),n=200*(u-s),[t,e,n]}function s(r){var t,e,n,a,o,i=r[0]/360,u=r[1]/100,s=r[2]/100;if(0==u)return o=255*s,[o,o,o];e=.5>s?s*(1+u):s+u-s*u,t=2*s-e,a=[0,0,0];for(var c=0;3>c;c++)n=i+1/3*-(c-1),0>n&&n++,n>1&&n--,o=1>6*n?t+6*(e-t)*n:1>2*n?e:2>3*n?t+(e-t)*(2/3-n)*6:t,a[c]=255*o;return a}function c(r){var t,e,n=r[0],a=r[1]/100,o=r[2]/100;return o*=2,a*=1>=o?o:2-o,e=(o+a)/2,t=2*a/(o+a),[n,100*a,100*e]}function l(r){return a(s(r))}function h(r){return o(s(r))}function f(r){var t=r[0]/60,e=r[1]/100,n=r[2]/100,a=Math.floor(t)%6,o=t-Math.floor(t),i=255*n*(1-e),u=255*n*(1-e*o),s=255*n*(1-e*(1-o)),n=255*n;switch(a){case 0:return[n,s,i];case 1:return[u,n,i];case 2:return[i,n,s];case 3:return[i,u,n];case 4:return[s,i,n];case 5:return[n,i,u]}}function d(r){var t,e,n=r[0],a=r[1]/100,o=r[2]/100;return e=(2-a)*o,t=a*o,t/=1>=e?e:2-e,e/=2,[n,100*t,100*e]}function g(r){return a(f(r))}function p(r){return o(f(r))}function m(r){var t,e,n,a=r[0]/100,o=r[1]/100,i=r[2]/100,u=r[3]/100;return t=1-Math.min(1,a*(1-u)+u),e=1-Math.min(1,o*(1-u)+u),n=1-Math.min(1,i*(1-u)+u),[255*t,255*e,255*n]}function M(r){return e(m(r))}function y(r){return n(m(r))}function b(r){return o(m(r))}function w(r){var t,e,n,a=r[0]/100,o=r[1]/100,i=r[2]/100;return t=3.2406*a+-1.5372*o+i*-.4986,e=a*-.9689+1.8758*o+.0415*i,n=.0557*a+o*-.204+1.057*i,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:t=12.92*t,e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:e=12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n=12.92*n,t=0>t?0:t,e=0>e?0:e,n=0>n?0:n,[255*t,255*e,255*n]}function A(r){return S[r]}function k(r){return e(A(r))}function E(r){return n(A(r))}function F(r){return a(A(r))}t.exports={rgb2hsl:e,rgb2hsv:n,rgb2cmyk:a,rgb2keyword:o,rgb2xyz:i,rgb2lab:u,hsl2rgb:s,hsl2hsv:c,hsl2cmyk:l,hsl2keyword:h,hsv2rgb:f,hsv2hsl:d,hsv2cmyk:g,hsv2keyword:p,cmyk2rgb:m,cmyk2hsl:M,cmyk2hsv:y,cmyk2keyword:b,keyword2rgb:A,keyword2hsl:k,keyword2hsv:E,keyword2cmyk:F,xyz2rgb:w};var S={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},C={};for(var N in S)C[JSON.stringify(S[N])]=N},{}],4:[function(r,t,e){var n=r("./conversions"),e={};t.exports=e;for(var a in n){e[a+"Raw"]=function(r){return function(t){return"number"==typeof t&&(t=Array.prototype.slice.call(arguments)),n[r](t)}}(a);var o=/(\w+)2(\w+)/.exec(a),i=o[1],u=o[2];e[i]=e[i]||{},e[a]=e[i][u]=function(r){return function(t){"number"==typeof t&&(t=Array.prototype.slice.call(arguments));var e=n[r](t);if("string"==typeof e||void 0===e)return e;for(var a=0;a<e.length;a++)e[a]=Math.round(e[a]);return e}}(a)}},{"./conversions":3}]},{},[1]),function(){function h(r,t,e){if(r.length)return console.error.apply(console,r);e.useProgram(t),e.enable(e.DEPTH_TEST);var n=k.getUniforms(e,t),a=d(e,n);e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),f(e,t,function(r){var t=performance.now();!function o(i){var u=i-t;t=i,m.rotateY(a,a,b(u*x)),e.uniformMatrix4fv(n.uModel,!1,a),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.drawElements(e.TRIANGLES,r,e.UNSIGNED_SHORT,0),requestAnimationFrame(o)}(t)})}function f(r,t,e){var n=k.getAttributes(r,t),a=S();v(r,r.ARRAY_BUFFER,new Float32Array(a.vertices),3,n.aPosition),v(r,r.ARRAY_BUFFER,new Float32Array(a.normals),3,n.aNormal),v(r,r.ELEMENT_ARRAY_BUFFER,new Uint16Array(a.indices)),e(a.indices.length)}function v(r,t,e,n,a){var o=r.createBuffer();if(!o)throw new Error("Failed to create buffer");r.bindBuffer(t,o),r.bufferData(t,e,r.STATIC_DRAW),t===r.ARRAY_BUFFER&&(r.vertexAttribPointer(a,n,r.FLOAT,!1,0,0),r.enableVertexAttribArray(a))}function d(r,t){var e=g();return r.uniformMatrix4fv(t.uModel,!1,e),r.uniformMatrix4fv(t.uView,!1,p()),r.uniformMatrix4fv(t.uProj,!1,y()),I?r.uniform4fv(t.uColor,I):r.uniform1i(t.uShowNormals,!0),e}function g(){var r=m.create();return m.scale(r,r,M.fromValues(1.8,1.8,1.8)),r}function p(){var r=M.fromValues(2,2,3),t=M.fromValues(0,0,0),e=M.fromValues(0,1,0),n=m.create();return m.lookAt(n,r,t,e),n}function y(){var r=m.create();return m.perspective(r,b(75),E,.01,50),r}function b(r){return r*Math.PI/180}function w(r){return.36/r}function A(){console.log("here I am ^_^ "),console.log(this);var r=parseInt(this.getAttribute("width"),10),t=parseInt(this.getAttribute("height"),10);if(isNaN(r)||isNaN(t))return console.error("width and height attributes required");var e=document.createElement("canvas");e.width=r,e.height=t,E=r/t,this.hasAttribute("color")?(I=colorString.getRgba(this.getAttribute("color")),I[0]/=255,I[1]/=255,I[2]/=255,F=!1):F=!0,S=this.hasAttribute("prim")?O[this.getAttribute("prim")]||O.sierpinski:O.sierpinski;var n=e.getContext("webgl",{preserveDrawingBuffer:!0});k=new l(n),k.loadFromStr(C,N,h),this.appendChild(e)}{var k,E,F,S,C="uniform mat4 uView;\nuniform mat4 uProj;\nuniform mat4 uModel;\n\nattribute vec4 aPosition;\nattribute vec4 aNormal;\n\nvarying vec3 vNormal;\nvarying vec3 vPosition;\n\nvoid main () {\n  vNormal = vec3(uModel * aNormal);\n  vPosition = vec3(uModel * aPosition);\n\n  gl_Position = uProj * uView * uModel * aPosition;\n}",N="precision mediump float;\n\nuniform bool uShowNormals;\nuniform vec4 uColor;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\n\nvec3 lightPosition = vec3(2, 2, 0);\nvec3 ambient = vec3(0.3);\nvec3 lightColor = vec3(1.0);\n\nvoid main () {\n  vec3 n = normalize(vNormal);\n  vec3 l = lightPosition - vPosition;\n\n  float nDotL = clamp(dot(n, normalize(l)) / length(l) * 2.0, 0.0, 1.0);\n\n  if (uShowNormals) {\n    gl_FragColor = vec4(abs(n), 1.0);\n  } else {\n    gl_FragColor = uColor;\n  }\n}",I=null,x=w(10),O={tetrahedron:r,hexahedron:t,octahedron:e,dodecahedron:n,icosahedron:a,cylinder:o,cone:i,sphere:u,torus:s,sierpinski:c};document.registerElement("geo-metry",{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:A},attachedCallback:{value:function(){console.log("live on DOM ;-) ")}},detachedCallback:{value:function(){console.log("leaving the DOM :-( )")}},attributeChangedCallback:{value:function(r,t,e){null==t?console.log("got a new attribute ",r," with value ",e):null==e?console.log("somebody removed ",r," its value was ",t):console.log(r," changed from ",t," to ",e)}}})})}}()}();